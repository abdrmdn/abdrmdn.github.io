<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>JetBrains DataGrip Explain Plan</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">JetBrains DataGrip Explain Plan</h1>
</header>
<section data-field="subtitle" class="p-summary">
I worked on a small task lately that requires me to improve the performance of page loading or the query loading of that page.
I jumped…
</section>
<section data-field="body" class="e-content">
<section name="fc7e" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="098d" id="098d" class="graf graf--h3 graf--leading graf--title">JetBrains DataGrip Explain Plan</h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="13d4" id="13d4" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.200000000000003%;"></div><img class="graf-image" data-image-id="1*knsItwDl-z1G6h-zKz3fFA.png" data-width="1753" data-height="459" data-is-featured="true" src="https://cdn-images-1.medium.com/max/2560/1*knsItwDl-z1G6h-zKz3fFA.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="f47d" id="f47d" class="graf graf--p graf-after--figure">I worked on a small task lately that requires me to improve the performance of page loading or the query loading of that page.<br>I jumped right into it and tried to find ways to analyze my query and since I’m using <a href="https://www.jetbrains.com/datagrip/" data-href="https://www.jetbrains.com/datagrip/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">DataGrip</a> already for DB related stuff, I decided to check what they have for analyzing queries.<br>Apparently, they have this thing called `Explain Plan` which if you’re familiar with MySQL is not different. but, they just try to visualize it differently or show it in a different way.<br>So, Basically, I’m going to explain how MySQL <code class="markup--code markup--p-code">Exaplin</code> works and that should be enough for you to understand what DataGrip is showing you.</p><p name="f15f" id="f15f" class="graf graf--p graf-after--p">With no more additional intros lets dive right into it.</p><h3 name="6cd9" id="6cd9" class="graf graf--h3 graf-after--p">What is `Explain Plan`</h3><h4 name="8a5b" id="8a5b" class="graf graf--h4 graf-after--h3">What’s the output table of explain plan</h4></div><div class="section-inner sectionLayout--fullWidth"><figure name="a376" id="a376" class="graf graf--figure graf--layoutFillWidth graf-after--h4"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 19.5%;"></div><img class="graf-image" data-image-id="1*P7ofDmVXaIIawAcSYlOqTg.png" data-width="2560" data-height="500" src="https://cdn-images-1.medium.com/max/2560/1*P7ofDmVXaIIawAcSYlOqTg.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="5b36" id="5b36" class="graf graf--p graf-after--figure">If you run the `Explain` part you can see better info, like the ones below:</p></div><div class="section-inner sectionLayout--fullWidth"><figure name="1a0a" id="1a0a" class="graf graf--figure graf--layoutFillWidth graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 19.5%;"></div><img class="graf-image" data-image-id="1*5OacueTSLAFwSaHRDKd60A.png" data-width="2560" data-height="500" src="https://cdn-images-1.medium.com/max/2560/1*5OacueTSLAFwSaHRDKd60A.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="73bf" id="73bf" class="graf graf--p graf-after--figure">Now let&#39;s explain whats inside that table.</p><h4 name="2b2d" id="2b2d" class="graf graf--h4 graf-after--p">Table Columns and explanations</h4><ul class="postList"><li name="aa50" id="aa50" class="graf graf--li graf-after--h4"><strong class="markup--strong markup--li-strong">ID<br></strong>This id will represent the id of the statement MySQL is going to execute in order. if you have a normal query you will see only 1. but, if you have a joined query and a subquery you will notice it will show you main query then subquery 2nd then the join 3rd. important to know the order ;).</li><li name="a6d5" id="a6d5" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Select Type</strong><br>As for this, It could have one of the following values (the [] is the focus):<br>— SubQuery: ex. (select actor_id, [select … from..etc] as something from the table)<br> — Derived: ex. select * from [select * from something_else]<br> — Union: join, union or such commands<br> — Union Result: the place where it joins the results of all joins.</li><li name="8cb9" id="8cb9" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Table</strong><br>This will refer to the table it&#39;s getting the data from for current query, sometimes it says instead of the table name &lt;derived4&gt; meaning that this join will wait for its internal command id=4 as a table to get data from. usually, its always like that for join commands.</li><li name="f078" id="f078" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Type</strong><br>Some say its called <code class="markup--code markup--li-code">access_type</code> , and those types are:<br> — ALL: find data in the table through normal scan (normal select queries)<br> — index: find data through an indexed column (nice to be this way)<br> — range: meaning it can limit the results based on the indexed column and take a range (fast query)<br> — ref: meaning this will match a ref from other tables<br> — eq_ref: if the ref to a unique key, meaning it will stop the moment it matches a row<br> — const, system: matches a const (very fast usually)</li><li name="8046" id="8046" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Possible Keys</strong><br>This will try to take all the columns used in the query and use them as possible columns to filter upon or use for execution.</li><li name="d688" id="d688" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Key</strong><br>The one index that MySQL decided to use to optimize the access of the wanted data.</li><li name="8264" id="8264" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Key_len<br></strong>The number of bytes MySql will use in the index. based on this value you can either play with your query to reduce the effect or change the structure of your tables to a better one if you weren&#39;t using the allocated bytes in your table.</li><li name="9244" id="9244" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Ref<br></strong>This shows which columns or constants are being used to lookup values in the index name in the key column.</li><li name="6400" id="6400" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Rows<br></strong>The number of rows MySQL estimate it will need to read to find the desired row.</li><li name="0e5d" id="0e5d" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Filtered</strong><br>The percentage of rows that will be filtered by using where conditions or things like that. if you multiply this with <code class="markup--code markup--li-code">rows</code> you will get how many rows this query will return to preceding queries.</li><li name="a03b" id="a03b" class="graf graf--li graf-after--li graf--trailing"><strong class="markup--strong markup--li-strong">Extra<br></strong>This contains some extra variant data like (` Using index`<code class="markup--code markup--li-code">,</code> `Using where`..) which shows how the filtering and data picking is going to happen. read more about it in <a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" data-href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">the documentation</a>.</li></ul></div></div></section><section name="2401" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9857" id="9857" class="graf graf--h3 graf--leading">Summary</h3><p name="ce30" id="ce30" class="graf graf--p graf-after--h3">Based on the info above you can notice that if you leverage on how many rows are being touched, how many are filtered and your key columns it will help you improve your query a lot if the improvement is possible.</p><p name="97d5" id="97d5" class="graf graf--p graf-after--p graf--trailing">If you know how to read these data and be able to use it to your advantage you’ll be able to improve how your query performs and how your website does.</p></div></div></section><section name="ea4a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="a5b1" id="a5b1" class="graf graf--p graf--leading">Of course, as you can see its just a very basic simple explanation if you want to understand more about this do read the detailed documentation from MySQL about this:</p><div name="5cd4" id="5cd4" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" data-href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html"><strong class="markup--strong markup--mixtapeEmbed-strong">MySQL :: MySQL 8.0 Reference Manual :: 8.8.2 EXPLAIN Output Format</strong><br><em class="markup--em markup--mixtapeEmbed-em">You can get a good indication of how good a join is by taking the product of the values in the rows column of the…</em>dev.mysql.com</a><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="6736bba666c8d9c8c127dc0ddfaa2d2f"></a></div></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@abidul.rmdn" class="p-author h-card">Abidul Ramadan</a> on <a href="https://medium.com/p/ac406772c470"><time class="dt-published" datetime="2019-07-10T11:23:12.369Z">July 10, 2019</time></a>.</p><p><a href="https://medium.com/@abidul.rmdn/jetbrains-datagrip-explain-plan-ac406772c470" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 28, 2019.</p></footer></article></body></html>